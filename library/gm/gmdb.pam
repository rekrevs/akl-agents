predicate('db_open'/1
label(3)
	switch_on_term(5,5,5,5,5,5,5)
label(5)
	try_single(0)
label(0)
	allocate(1)
	get_y_variable(0,0)
    guard_wait
	put_y_value(0,0)
	put_y_variable(0,1)
	call('open_port'/2)
	put_y_value(0,0)
	put_x_variable(3,1)
	put_x_value(3,2)
	dealloc_execute('db'/3)
)


predicate('db'/3
label(5)
	switch_on_term(10,8,7,7,7,11,7)
label(8)
	switch_on_constant(1,[('[]',9)],7)
label(7)
	fail
label(9)
	try_single(0)
label(10)
	try(0)
	trust(1)
label(11)
	try_single(1)
label(0)
	allocate(0)
	get_nil_x0
    guard_cond
	dealloc_proceed
label(1)
	allocate(4)
	get2_y_variable(0,2,1,1)
	get_list_x0
	unify_y_variable(3)
	unify_y_variable(2)
    guard_cond
	put2_y_value(3,0,1,1)
	put_y_variable(1,2)
	put_y_value(0,3)
	put_y_variable(0,4)
	call('db_one'/5)
	put3_y_value(2,0,1,1,0,2)
	dealloc_execute('db'/3)
)


predicate('db_one'/5
label(9)
	switch_on_term(14,11,11,11,11,11,12)
label(12)
	switch_on_structure(4,[('delete'/3,17),('insert'/2,15),('lookup'/3,16),('sync'/1,13)],11)
label(11)
	fail
label(13)
	try_single(0)
label(14)
	try(0)
	retry(1)
	retry(2)
	trust(3)
label(15)
	try_single(1)
label(16)
	try_single(2)
label(17)
	try_single(3)
label(0)
	allocate(5)
	get4_y_variable(4,4,3,3,2,2,1,1)
	get_structure_x0('sync'/1)
	unify_y_variable(0)
    guard_cond
	put_y_value(4,5)
	get_y_value(3,5)
	put_y_value(2,5)
	get_y_value(1,5)
	put_y_value(0,5)
	get_nil(5)
	dealloc_proceed
label(1)
	allocate(6)
	get4_y_variable(2,4,3,3,5,2,4,1)
	get_structure_x0('insert'/2)
	unify_y_variable(1)
	unify_y_variable(0)
    guard_cond
	put_y_value(5,5)
	get_y_value(4,5)
	put_y_value(3,5)
	get_list(5)
	unify_x_variable(5)
	unify_y_value(2)
	get_structure('rec'/2,5)
	unify_y_value(1)
	unify_y_value(0)
	dealloc_proceed
label(2)
	allocate(7)
	get4_y_variable(6,4,0,3,5,2,1,1)
	get_structure_x0('lookup'/3)
	unify_y_variable(4)
	unify_y_variable(3)
	unify_y_variable(2)
	put_y_value(4,0)
	call('data'/1)
    guard_cond
	put_y_value(6,5)
	get_y_value(0,5)
	put_y_value(5,5)
	get_y_value(1,5)
	put5_y_value(4,0,3,1,2,2,1,3,0,4)
	dealloc_execute('dblookup'/5)
label(3)
	allocate(7)
	get4_y_variable(6,4,0,3,5,2,1,1)
	get_structure_x0('delete'/3)
	unify_y_variable(4)
	unify_y_variable(3)
	unify_y_variable(2)
	put_y_value(4,0)
	call('data'/1)
    guard_cond
	put_y_value(6,5)
	get_y_value(0,5)
	put_y_value(5,5)
	get_y_value(1,5)
	put5_y_value(4,0,3,1,2,2,1,3,0,4)
	dealloc_execute('dbdelete'/5)
)


predicate('dblookup'/5
label(7)
	switch_on_term(9,9,9,9,9,9,9)
label(9)
	try(0)
	retry(1)
	trust(2)
label(0)
	allocate(1)
	get_x_variable(5,4)
	get_x_value(5,3)
	get_y_variable(0,2)
    guard_commit
	put_y_value(0,5)
	get_constant('no',5)
	dealloc_proceed
label(1)
	allocate(3)
	get_x_variable(5,3)
	get2_y_variable(2,2,1,1)
	get_x_variable(6,0)
	get_list(5)
	unify_x_variable(5)
	unify_void
	get_structure('rec'/2,5)
	unify_x_value(6)
	unify_y_variable(0)
    guard_commit
	put_y_value(2,6)
	get_constant('yes',6)
	put_y_value(1,6)
	get_y_value(0,6)
	dealloc_proceed
label(2)
	allocate(5)
	get4_y_variable(0,4,2,2,3,1,4,0)
	get_list(3)
	unify_void
	unify_y_variable(1)
    guard_commit
	put5_y_value(4,0,3,1,2,2,1,3,0,4)
	dealloc_execute('dblookup'/5)
)


predicate('dbdelete'/5
label(7)
	switch_on_term(9,9,9,9,9,9,9)
label(9)
	try(0)
	retry(1)
	trust(2)
label(0)
	allocate(1)
	get_x_variable(5,4)
	get_x_value(5,3)
	get_y_variable(0,2)
    guard_commit
	put_y_value(0,5)
	get_constant('no',5)
	dealloc_proceed
label(1)
	allocate(4)
	get3_y_variable(3,3,2,2,1,1)
	get_x_variable(5,0)
	put_y_value(3,6)
	get_list(6)
	unify_x_variable(6)
	unify_void
	get_structure('rec'/2,6)
	unify_x_value(5)
	unify_y_variable(0)
    guard_commit
	put_constant(1,0)
	put_constant('deleted',2)
	put_y_value(3,1)
	call('sys_setarg'/3)
	put_y_value(2,5)
	get_constant('yes',5)
	put_y_value(1,5)
	get_y_value(0,5)
	dealloc_proceed
label(2)
	allocate(5)
	get4_y_variable(0,4,2,2,3,1,4,0)
	get_list(3)
	unify_void
	unify_y_variable(1)
    guard_commit
	put5_y_value(4,0,3,1,2,2,1,3,0,4)
	dealloc_execute('dbdelete'/5)
)


